{"version":3,"sources":["Setting.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Script\\SceneScript\\Home","sourcesContent":["const { ccclass, property } = cc._decorator;\r\nimport * as dd from './../../Modules/ModuleManager';\r\n\r\n@ccclass\r\nexport default class Setting extends cc.Component {\r\n    /**\r\n     * 音效开关\r\n     * \r\n     * @type {cc.Toggle}\r\n     * @memberof Setting\r\n     */\r\n    @property(cc.Toggle)\r\n    toggle: cc.Toggle = null;\r\n    /**\r\n     * 版本号\r\n     * \r\n     * @type {cc.Label}\r\n     * @memberof Setting\r\n     */\r\n    @property(cc.Label)\r\n    lab_ver: cc.Label = null;\r\n    /**\r\n     * 是否已经完成onLoad\r\n     * \r\n     * @type {boolean}\r\n     * @memberof Setting\r\n     */\r\n    isInit: boolean = false;\r\n\r\n    onLoad() {\r\n        if (dd.mp_manager.sw) {\r\n            this.toggle.check();\r\n        } else {\r\n            this.toggle.uncheck();\r\n        }\r\n        this.lab_ver.string = dd.config.version;\r\n        dd.ui_manager.hideLoading();\r\n        this.isInit = true;\r\n    }\r\n    /**\r\n     * 点击音效开关\r\n     * \r\n     * @memberof Setting\r\n     */\r\n    click_toggle() {\r\n        if (this.isInit) {\r\n            dd.mp_manager.playButton();\r\n        }\r\n        dd.mp_manager.sw = this.toggle.isChecked;\r\n        cc.sys.localStorage.setItem('sw', JSON.stringify({ sw: this.toggle.isChecked }));\r\n    }\r\n    /**\r\n     * 点击返回大厅\r\n     * \r\n     * @memberof Setting\r\n     */\r\n    click_back() {\r\n        dd.mp_manager.playButton();\r\n        this.node.destroy();\r\n    }\r\n    /**\r\n     * 点击注销登录\r\n     * \r\n     * @memberof Setting\r\n     */\r\n    click_out() {\r\n        dd.ui_manager.showLoading('正在注销,请稍后');\r\n        dd.mp_manager.playButton();\r\n        let obj = { 'accountId': dd.ud_manager.account_mine.accountId };\r\n        let msg = JSON.stringify(obj);\r\n        dd.ws_manager.sendMsg(dd.protocol.ACCOUNT_LOGIN_OUT, msg, (flag: number, content?: any) => {\r\n            if (flag === 0) {\r\n                dd.ws_manager.disconnect(() => {\r\n                    let db = cc.sys.localStorage;\r\n                    if (db.getItem('TokenInfo')) {\r\n                        db.removeItem('TokenInfo');\r\n                    }\r\n                    dd.destroy();\r\n                    cc.sys.garbageCollect();\r\n                    cc.game.restart();\r\n                });\r\n            } else if (flag === -1) {\r\n                dd.ui_manager.showTip('注销消息发送超时');\r\n            } else {\r\n                dd.ui_manager.showTip(content);\r\n            }\r\n        });\r\n    }\r\n}\r\n"]}