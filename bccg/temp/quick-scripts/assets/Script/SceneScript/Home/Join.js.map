{"version":3,"sources":["Join.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Script\\SceneScript\\Home","sourcesContent":["const { ccclass, property } = cc._decorator;\r\nimport * as dd from './../../Modules/ModuleManager';\r\n\r\n@ccclass\r\nexport default class Join extends cc.Component {\r\n    /**\r\n     * 展示点击数字的标签数组\r\n     * \r\n     * @type {cc.Label[]}\r\n     * @memberof Join\r\n     */\r\n    nums: cc.Label[] = [];\r\n    /**\r\n     * 当前输入的数字对应的下标\r\n     * \r\n     * @type {number}\r\n     * @memberof Join\r\n     */\r\n    currentIndex: number = 0;\r\n\r\n    onLoad() {\r\n        this.nums.length = 0;\r\n        this.currentIndex = 0;\r\n        cc.find('layout', this.node).children.forEach((node: cc.Node) => {\r\n            let num = cc.find('num', node).getComponent(cc.Label);\r\n            this.nums.push(num);\r\n        }, this);\r\n        this.nums.sort((a: cc.Label, b: cc.Label) => {\r\n            return Number(a.node.parent.name) - Number(b.node.parent.name);\r\n        });\r\n        dd.ui_manager.hideLoading();\r\n    }\r\n    /**\r\n     * 点击关闭按钮\r\n     * \r\n     * @memberof Join\r\n     */\r\n    click_out() {\r\n        dd.mp_manager.playButton();\r\n        this.node.destroy();\r\n    }\r\n    /**\r\n     * 点击按钮\r\n     * \r\n     * @param {cc.Event.EventTouch} event \r\n     * @param {string} [data] \r\n     * @memberof Join\r\n     */\r\n    click_btn(event: cc.Event.EventTouch, data: string) {\r\n        dd.mp_manager.playButton();\r\n        let index = Number(data);\r\n        if (index === 10) {//删除\r\n            if (this.currentIndex > 0) {\r\n                this.currentIndex--;\r\n                this.nums[this.currentIndex].string = '';\r\n            } else {\r\n                this.nums[0].string = '';\r\n            }\r\n        } else if (index === 11) {//清空\r\n            this.nums.forEach((label: cc.Label) => {\r\n                label.string = '';\r\n            }, this);\r\n            this.currentIndex = 0;\r\n        } else {//0-9的数字\r\n            if (this.currentIndex < this.nums.length) {\r\n                this.nums[this.currentIndex].string = data;\r\n                this.currentIndex++;\r\n                if (this.currentIndex === this.nums.length) {\r\n                    if (!dd.ui_manager.showLoading('正在加入房间,请稍后')) return;\r\n                    let obj = { tableId: this.getNumber() };\r\n                    let msg = JSON.stringify(obj);\r\n                    dd.ws_manager.sendMsg(dd.protocol.DZPKER_TABLE_JOIN, msg, (flag: number, content?: any) => {\r\n                        if (flag === 0) {\r\n                            dd.gm_manager.setTableData(content as TableData, 1);\r\n                            cc.director.loadScene('GameScene', () => {\r\n                                dd.ui_manager.showTip('加入房间成功');\r\n                            });\r\n                        } else if (flag === -1) {\r\n                            dd.ui_manager.showTip('加入房间消息发送超时');\r\n                        } else {\r\n                            dd.ui_manager.showTip(content);\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * 获取所有标签所组成的数字\r\n     * \r\n     * @returns \r\n     * @memberof Join\r\n     */\r\n    getNumber() {\r\n        let numStr = '';\r\n        for (let i = 0; i < this.nums.length; i++) {\r\n            numStr += this.nums[i].string;\r\n        }\r\n        return Number(numStr);\r\n    }\r\n}\r\n"]}