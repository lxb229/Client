{"version":3,"sources":["Promise.js"],"names":["root","setTimeoutFunc","setTimeout","noop","bind","fn","thisArg","apply","arguments","Promise","TypeError","_state","_handled","_value","undefined","_deferreds","doResolve","handle","self","deferred","push","_immediateFn","cb","onFulfilled","onRejected","resolve","reject","promise","ret","e","newValue","then","finale","length","_unhandledRejectionFn","i","len","Handler","done","value","reason","ex","prototype","prom","constructor","all","arr","args","Array","slice","call","remaining","res","val","race","values","setImmediate","err","console","warn","_setImmediateFn","_setUnhandledRejectionFn","module","exports","window"],"mappings":"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","file":"Promise.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\Script\\Lib","sourcesContent":["(function (root) {\r\n\r\n  // Store setTimeout reference so promise-polyfill will be unaffected by\r\n  // other code modifying setTimeout (like sinon.useFakeTimers())\r\n  var setTimeoutFunc = setTimeout;\r\n\r\n  function noop() { }\r\n\r\n  // Polyfill for Function.prototype.bind\r\n  function bind(fn, thisArg) {\r\n    return function () {\r\n      fn.apply(thisArg, arguments);\r\n    };\r\n  }\r\n\r\n  function Promise(fn) {\r\n    if (typeof this !== 'object') throw new TypeError('Promises must be constructed via new');\r\n    if (typeof fn !== 'function') throw new TypeError('not a function');\r\n    this._state = 0;\r\n    this._handled = false;\r\n    this._value = undefined;\r\n    this._deferreds = [];\r\n\r\n    doResolve(fn, this);\r\n  }\r\n\r\n  function handle(self, deferred) {\r\n    while (self._state === 3) {\r\n      self = self._value;\r\n    }\r\n    if (self._state === 0) {\r\n      self._deferreds.push(deferred);\r\n      return;\r\n    }\r\n    self._handled = true;\r\n    Promise._immediateFn(function () {\r\n      var cb = self._state === 1 ? deferred.onFulfilled : deferred.onRejected;\r\n      if (cb === null) {\r\n        (self._state === 1 ? resolve : reject)(deferred.promise, self._value);\r\n        return;\r\n      }\r\n      var ret;\r\n      try {\r\n        ret = cb(self._value);\r\n      } catch (e) {\r\n        reject(deferred.promise, e);\r\n        return;\r\n      }\r\n      resolve(deferred.promise, ret);\r\n    });\r\n  }\r\n\r\n  function resolve(self, newValue) {\r\n    try {\r\n      // Promise Resolution Procedure: https://github.com/promises-aplus/promises-spec#the-promise-resolution-procedure\r\n      if (newValue === self) throw new TypeError('A promise cannot be resolved with itself.');\r\n      if (newValue && (typeof newValue === 'object' || typeof newValue === 'function')) {\r\n        var then = newValue.then;\r\n        if (newValue instanceof Promise) {\r\n          self._state = 3;\r\n          self._value = newValue;\r\n          finale(self);\r\n          return;\r\n        } else if (typeof then === 'function') {\r\n          doResolve(bind(then, newValue), self);\r\n          return;\r\n        }\r\n      }\r\n      self._state = 1;\r\n      self._value = newValue;\r\n      finale(self);\r\n    } catch (e) {\r\n      reject(self, e);\r\n    }\r\n  }\r\n\r\n  function reject(self, newValue) {\r\n    self._state = 2;\r\n    self._value = newValue;\r\n    finale(self);\r\n  }\r\n\r\n  function finale(self) {\r\n    if (self._state === 2 && self._deferreds.length === 0) {\r\n      Promise._immediateFn(function () {\r\n        if (!self._handled) {\r\n          Promise._unhandledRejectionFn(self._value);\r\n        }\r\n      });\r\n    }\r\n\r\n    for (var i = 0, len = self._deferreds.length; i < len; i++) {\r\n      handle(self, self._deferreds[i]);\r\n    }\r\n    self._deferreds = null;\r\n  }\r\n\r\n  function Handler(onFulfilled, onRejected, promise) {\r\n    this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\r\n    this.onRejected = typeof onRejected === 'function' ? onRejected : null;\r\n    this.promise = promise;\r\n  }\r\n\r\n  /**\r\n   * Take a potentially misbehaving resolver function and make sure\r\n   * onFulfilled and onRejected are only called once.\r\n   *\r\n   * Makes no guarantees about asynchrony.\r\n   */\r\n  function doResolve(fn, self) {\r\n    var done = false;\r\n    try {\r\n      fn(function (value) {\r\n        if (done) return;\r\n        done = true;\r\n        resolve(self, value);\r\n      }, function (reason) {\r\n        if (done) return;\r\n        done = true;\r\n        reject(self, reason);\r\n      });\r\n    } catch (ex) {\r\n      if (done) return;\r\n      done = true;\r\n      reject(self, ex);\r\n    }\r\n  }\r\n\r\n  Promise.prototype['catch'] = function (onRejected) {\r\n    return this.then(null, onRejected);\r\n  };\r\n\r\n  Promise.prototype.then = function (onFulfilled, onRejected) {\r\n    var prom = new (this.constructor)(noop);\r\n\r\n    handle(this, new Handler(onFulfilled, onRejected, prom));\r\n    return prom;\r\n  };\r\n\r\n  Promise.all = function (arr) {\r\n    var args = Array.prototype.slice.call(arr);\r\n\r\n    return new Promise(function (resolve, reject) {\r\n      if (args.length === 0) return resolve([]);\r\n      var remaining = args.length;\r\n\r\n      function res(i, val) {\r\n        try {\r\n          if (val && (typeof val === 'object' || typeof val === 'function')) {\r\n            var then = val.then;\r\n            if (typeof then === 'function') {\r\n              then.call(val, function (val) {\r\n                res(i, val);\r\n              }, reject);\r\n              return;\r\n            }\r\n          }\r\n          args[i] = val;\r\n          if (--remaining === 0) {\r\n            resolve(args);\r\n          }\r\n        } catch (ex) {\r\n          reject(ex);\r\n        }\r\n      }\r\n\r\n      for (var i = 0; i < args.length; i++) {\r\n        res(i, args[i]);\r\n      }\r\n    });\r\n  };\r\n\r\n  Promise.resolve = function (value) {\r\n    if (value && typeof value === 'object' && value.constructor === Promise) {\r\n      return value;\r\n    }\r\n\r\n    return new Promise(function (resolve) {\r\n      resolve(value);\r\n    });\r\n  };\r\n\r\n  Promise.reject = function (value) {\r\n    return new Promise(function (resolve, reject) {\r\n      reject(value);\r\n    });\r\n  };\r\n\r\n  Promise.race = function (values) {\r\n    return new Promise(function (resolve, reject) {\r\n      for (var i = 0, len = values.length; i < len; i++) {\r\n        values[i].then(resolve, reject);\r\n      }\r\n    });\r\n  };\r\n\r\n  // Use polyfill for setImmediate for performance gains\r\n  Promise._immediateFn = (typeof setImmediate === 'function' && function (fn) { setImmediate(fn); }) ||\r\n    function (fn) {\r\n      setTimeoutFunc(fn, 0);\r\n    };\r\n\r\n  Promise._unhandledRejectionFn = function _unhandledRejectionFn(err) {\r\n    if (typeof console !== 'undefined' && console) {\r\n      console.warn('Possible Unhandled Promise Rejection:', err); // eslint-disable-line no-console\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Set the immediate function to execute callbacks\r\n   * @param fn {function} Function to execute\r\n   * @deprecated\r\n   */\r\n  Promise._setImmediateFn = function _setImmediateFn(fn) {\r\n    Promise._immediateFn = fn;\r\n  };\r\n\r\n  /**\r\n   * Change the function to execute on unhandled rejection\r\n   * @param {function} fn Function to execute on unhandled rejection\r\n   * @deprecated\r\n   */\r\n  Promise._setUnhandledRejectionFn = function _setUnhandledRejectionFn(fn) {\r\n    Promise._unhandledRejectionFn = fn;\r\n  };\r\n\r\n  if (typeof module !== 'undefined' && module.exports) {\r\n    module.exports = Promise;\r\n  } else if (!root.Promise) {\r\n    root.Promise = Promise;\r\n  }\r\n})(window);\r\n"]}