{"version":3,"sources":["UIManager.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\assets\\Script\\Modules","sourcesContent":["/**\r\n * 管理公共UI的类\r\n * \r\n * @export\r\n * @class UIManager\r\n */\r\nexport default class UIManager {\r\n    private static _instance: UIManager = null;\r\n    private constructor() { }\r\n    /**\r\n     * 获取WSManager单例对象\r\n     * \r\n     * @static\r\n     * @returns {UIManager} \r\n     * @memberof UIManager\r\n     */\r\n    static getInstance(): UIManager {\r\n        if (UIManager._instance === null) {\r\n            UIManager._instance = new UIManager();\r\n        }\r\n        return UIManager._instance;\r\n    }\r\n    /**\r\n     * 是否处于场景切换中\r\n     * \r\n     * @type {boolean}\r\n     * @memberof UIManager\r\n     */\r\n    isLoadingScence: boolean = false;\r\n\r\n    /**\r\n     * loading 节点\r\n     * \r\n     * @private\r\n     * @type {cc.Node}\r\n     * @memberof UIManager\r\n     */\r\n    private loadingNode: cc.Node = null;\r\n    /**\r\n     * tip 节点\r\n     * \r\n     * @private\r\n     * @type {cc.Node}\r\n     * @memberof UIManager\r\n     */\r\n    private tipNode: cc.Node = null;\r\n    /**\r\n     * alert 节点\r\n     * \r\n     * @private\r\n     * @type {cc.Node}\r\n     * @memberof UIManager\r\n     */\r\n    private alertNode: cc.Node = null;\r\n    /**\r\n     * alert节点里的确定按钮点击回调事件\r\n     * \r\n     * @private\r\n     * @memberof UIManager\r\n     */\r\n    private cb_yes: () => void = null;\r\n    /**\r\n     * alert节点里的取消按钮点击回调事件\r\n     * \r\n     * @private\r\n     * @memberof UIManager\r\n     */\r\n    private cb_no: () => void = null;\r\n    /**\r\n     * 场景切换前的回调\r\n     * \r\n     * @memberof UIManager\r\n     */\r\n    private cb_before_scene_loading: (event: cc.Event.EventCustom) => void = (event: cc.Event.EventCustom) => {\r\n        this.isLoadingScence = true;\r\n        this.hideLoading();\r\n    }\r\n\r\n\r\n    private cb_after_scene_loading: (event: cc.Event.EventCustom) => void = (event: cc.Event.EventCustom) => {\r\n        this.isLoadingScence = false;\r\n    }\r\n\r\n    /**\r\n     * 游戏每帧刷新前的回调\r\n     * \r\n     * @memberof UIManager\r\n     */\r\n    private cb_befor_update: (event: cc.Event.EventCustom) => void = (event: cc.Event.EventCustom) => {\r\n\r\n    }\r\n    /**\r\n     * app切换到后台的回调\r\n     * \r\n     * @memberof UIManager\r\n     */\r\n    private cb_app_hide: (event: cc.Event.EventCustom) => void = (event: cc.Event.EventCustom) => {\r\n        if (!cc.game.isPaused()) {\r\n            cc.game.pause();\r\n        }\r\n    }\r\n    /**\r\n     * app切换到前台的回调\r\n     * \r\n     * @memberof UIManager\r\n     */\r\n    private cb_app_show: (event: cc.Event.EventCustom) => void = (event: cc.Event.EventCustom) => {\r\n        if (cc.game.isPaused()) {\r\n            cc.game.resume();\r\n        }\r\n    }\r\n    /**\r\n     * 初始化\r\n     * \r\n     * @memberof UIManager\r\n     */\r\n    async initUI(): Promise<void> {\r\n        //注册全局事件\r\n        cc.director.on(cc.Director.EVENT_BEFORE_SCENE_LOADING, this.cb_before_scene_loading, this);\r\n        cc.director.on(cc.Director.EVENT_AFTER_SCENE_LAUNCH, this.cb_after_scene_loading, this);\r\n        cc.director.on(cc.Director.EVENT_BEFORE_UPDATE, this.cb_befor_update, this);\r\n        cc.game.on(cc.game.EVENT_HIDE, this.cb_app_hide, this);\r\n        cc.game.on(cc.game.EVENT_SHOW, this.cb_app_show, this);\r\n        this.loadingNode = await this.loadPrefabToNode('Loading');\r\n        this.tipNode = await this.loadPrefabToNode('Tip');\r\n        this.alertNode = await this.loadPrefabToNode('Alert');\r\n    }\r\n    /**\r\n     * 加载prefab,返回实例化节点Node\r\n     * \r\n     * @param {string} name \r\n     * @returns {Promise<cc.Node>} \r\n     * @memberof UIManager\r\n     */\r\n    loadPrefabToNode(name: string): Promise<cc.Node> {\r\n        let path = 'Prefab/' + name;\r\n        return new Promise<cc.Node>((resolve, reject) => {\r\n            cc.loader.loadRes(path, cc.Prefab, (err: Error, prefab: cc.Prefab) => {\r\n                if (err) {\r\n                    reject(err.message);\r\n                } else {\r\n                    let node = cc.instantiate(prefab);\r\n                    cc.loader.release(prefab);\r\n                    resolve(node);\r\n                }\r\n            });\r\n        });\r\n    }\r\n    /**\r\n     * 显示Loading框\r\n     * \r\n     * @param {string} [msg='正在加载,请稍后'] \r\n     * @memberof UIManager\r\n     */\r\n    showLoading(msg: string = '正在加载,请稍后'): boolean {\r\n        if (this.isLoadingScence) return false;\r\n        if (this.loadingNode && this.loadingNode.isValid) {\r\n            this.loadingNode.parent = this.getCanvasNode();\r\n            this.loadingNode.setLocalZOrder(this.loadingNode.parent.childrenCount - 1);\r\n            this.loadingNode.getComponent(cc.Animation).setCurrentTime(0);\r\n            cc.find('layout/lbl_msg', this.loadingNode).getComponent(cc.Label).string = msg;\r\n        } else {\r\n            cc.error('loadingNode不存在');\r\n        }\r\n        return true;\r\n    }\r\n    /**\r\n     * 隐藏loading框\r\n     * \r\n     * @memberof UIManager\r\n     */\r\n    hideLoading() {\r\n        if (this.loadingNode && this.loadingNode.parent) {\r\n            this.loadingNode.removeFromParent();\r\n        }\r\n    }\r\n    /**\r\n     * 显示飘框提示\r\n     * \r\n     * @param {string} msg 提示内容\r\n     * @param {number} [distance=400] 飘框需要移动的距离\r\n     * @param {number} [time1=0.5] \r\n     * @param {number} [time2=1] \r\n     * @param {number} [time3=0.5] \r\n     * @memberof UIManager\r\n     */\r\n    showTip(msg: string, distance: number = 400, time1: number = 0.5, time2: number = 1, time3: number = 0.5) {\r\n        this.hideLoading();\r\n        if (this.tipNode) {\r\n            let tip = cc.instantiate(this.tipNode);\r\n            tip.parent = this.getCanvasNode();\r\n            tip.setLocalZOrder(tip.parent.childrenCount - 1);\r\n            cc.find('layout/lbl_msg', tip).getComponent(cc.Label).string = msg;\r\n            let layout = cc.find('layout', tip);\r\n            layout.setPosition(0, -distance * 0.5);\r\n            let action1 = cc.spawn(cc.moveTo(time1, cc.p(0, 0)), cc.fadeIn(time1));\r\n            let action3 = cc.spawn(cc.moveTo(time3, cc.p(0, distance)), cc.fadeOut(time3));\r\n            let endAction = cc.callFunc(() => {\r\n                tip.removeFromParent();\r\n                tip.destroy();\r\n            }, this);\r\n            layout.runAction(cc.sequence(action1, cc.delayTime(1), action3, endAction));\r\n        } else {\r\n            cc.error('tipNode不存在');\r\n        }\r\n    }\r\n    /**\r\n     * 显示弹出框\r\n     * \r\n     * @param {number} type 1是温馨提示,2是错误提示\r\n     * @param {string} msg 文本内容(富文本)\r\n     * @param {Function} [yes] 点击确定后的回调方法\r\n     * @param {Function} [no] 点击取消后的回调方法\r\n     * @memberof UIManager\r\n     */\r\n    showAlert(type: number, msg: string, yes?: () => void, no?: () => void) {\r\n        this.hideLoading();\r\n        this.hideAlert();\r\n        if (this.alertNode) {\r\n            if (type === 1) {\r\n                cc.find('box/wxts', this.alertNode).active = true;\r\n                cc.find('box/cwts', this.alertNode).active = false;\r\n            } else {\r\n                cc.find('box/wxts', this.alertNode).active = false;\r\n                cc.find('box/cwts', this.alertNode).active = true;\r\n            }\r\n            cc.find('box/board_msg/rt_msg', this.alertNode).getComponent(cc.RichText).string = msg;\r\n            let btn_yes = cc.find('box/layout/btn_yes', this.alertNode);\r\n            btn_yes.active = true;\r\n            btn_yes.on(cc.Node.EventType.TOUCH_END, this.cb_click, this);\r\n            if (yes) this.cb_yes = yes;\r\n            let btn_no = cc.find('box/layout/btn_no', this.alertNode);\r\n            if (no) {\r\n                this.cb_no = no;\r\n                btn_no.active = true;\r\n                btn_no.on(cc.Node.EventType.TOUCH_END, this.cb_click, this);\r\n            } else {\r\n                btn_no.active = false;\r\n            }\r\n            this.alertNode.parent = this.getCanvasNode();\r\n            this.alertNode.setLocalZOrder(this.alertNode.parent.childrenCount - 1);\r\n        } else {\r\n            cc.error('alertNode不存在');\r\n        }\r\n    }\r\n    /**\r\n     * alert框按钮点击事件\r\n     * \r\n     * @private\r\n     * @param {cc.Event.EventTouch} event \r\n     * @memberof UIManager\r\n     */\r\n    private cb_click(event: cc.Event.EventTouch) {\r\n        let btn_yes = cc.find('box/layout/btn_yes', this.alertNode);\r\n        let btn_no = cc.find('box/layout/btn_no', this.alertNode);\r\n        if (btn_yes === event.currentTarget && this.cb_yes) {\r\n            this.cb_yes();\r\n        }\r\n        if (btn_no === event.currentTarget && this.cb_no) {\r\n            this.cb_no();\r\n        }\r\n        this.hideAlert();\r\n    }\r\n    /**\r\n     * 隐藏Alert框\r\n     * \r\n     * @memberof UIManager\r\n     */\r\n    hideAlert() {\r\n        if (this.alertNode && this.alertNode.parent) {\r\n            this.alertNode.removeFromParent();\r\n        }\r\n        cc.find('box/wxts', this.alertNode).active = false;\r\n        cc.find('box/cwts', this.alertNode).active = false;\r\n        cc.find('box/board_msg/rt_msg', this.alertNode).getComponent(cc.RichText).string = '';\r\n        let btn_yes = cc.find('box/layout/btn_yes', this.alertNode);\r\n        btn_yes.off(cc.Node.EventType.TOUCH_END, this.cb_click, this);\r\n        this.cb_yes = null;\r\n        btn_yes.active = false;\r\n        let btn_no = cc.find('box/layout/btn_no', this.alertNode);\r\n        btn_no.off(cc.Node.EventType.TOUCH_END, this.cb_click, this);\r\n        btn_no.active = false;\r\n        this.cb_no = null;\r\n    }\r\n\r\n    /**\r\n     * 获取当前显示的Canvas节点\r\n     * \r\n     * @returns {cc.Node} \r\n     * @memberof UIManager\r\n     */\r\n    getCanvasNode(): cc.Node {\r\n        return cc.director.getScene().getChildByName('Canvas');\r\n    }\r\n    /**\r\n     * 获取当前场景下的RootNode节点\r\n     * \r\n     * @returns {cc.Node} \r\n     * @memberof UIManager\r\n     */\r\n    getRootNode(): cc.Node {\r\n        return cc.find('RootNode', this.getCanvasNode());\r\n    }\r\n\r\n    /**\r\n     * 清理销毁\r\n     * \r\n     * @memberof WSManager\r\n     */\r\n    destroySelf(): void {\r\n        //注销全局事件\r\n        cc.director.off(cc.Director.EVENT_BEFORE_SCENE_LOADING, this.cb_before_scene_loading, this);\r\n        cc.director.off(cc.Director.EVENT_BEFORE_UPDATE, this.cb_befor_update, this);\r\n        cc.game.off(cc.game.EVENT_HIDE, this.cb_app_hide, this);\r\n        cc.game.off(cc.game.EVENT_SHOW, this.cb_app_show, this);\r\n        //清除loading框\r\n        if (this.loadingNode) {\r\n            this.hideLoading();\r\n            this.loadingNode.destroy();\r\n            this.loadingNode = null;\r\n        }\r\n        //清除tip框\r\n        if (this.tipNode) {\r\n            this.tipNode.destroy();\r\n            this.tipNode = null;\r\n        }\r\n        //清除alert框\r\n        if (this.alertNode) {\r\n            this.hideAlert();\r\n            this.alertNode.destroy();\r\n            this.alertNode = null;\r\n        }\r\n\r\n        UIManager._instance = null;\r\n    }\r\n}"]}